<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ContinuuAI | From Chat to Decision Continuity</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="nav">
    <div class="nav__brand">
      <div class="logo-glow"></div>
      <span class="logo">ContinuuAI</span>
    </div>
    <div class="nav__cta">
      <a class="btn ghost" href="/record">Record a decision</a>
      <a class="btn primary" href="/dashboard">See the dashboard</a>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="hero__copy">
        <p class="eyebrow">Decision continuity, not chat history</p>
        <h1>From chat to <span class="gradient">decision continuity</span></h1>
        <p class="lede">
          Capture decisions in 30 seconds, surface contradictions and drift automatically, and brief new teammates with evidence-anchored context.
        </p>
        <div class="hero__actions">
          <a class="btn primary" href="/dashboard">See the Decision Dashboard</a>
          <a class="btn ghost" href="/record">Record your first decision</a>
        </div>
        <div class="badges">
          <div class="badge">Dissent preserved</div>
          <div class="badge">Conflicts detected</div>
          <div class="badge">30s capture</div>
        </div>
      </div>
      <div class="hero__panel">
        <div class="panel-heading">Needs Attention</div>
        <div class="panel-card">
          <span class="pill warning">Revisit</span>
          <div>
            <p class="card-title">API Versioning</p>
            <p class="card-sub">Due Jan 15 • Stream: Platform</p>
          </div>
        </div>
        <div class="panel-card">
          <span class="pill alert">Dissent</span>
          <div>
            <p class="card-title">Security concerns on Feature X</p>
            <p class="card-sub">Maria Chen: “We’re deciding for patients, not with them.”</p>
          </div>
        </div>
        <div class="panel-card">
          <span class="pill info">Insight</span>
          <div>
            <p class="card-title">Pricing v2 conflicts with Enterprise discount</p>
            <p class="card-sub">Detected by pattern analyzer</p>
          </div>
        </div>
        <div class="panel-footer">
          <div>
            <p class="metric-label">Decisions recorded</p>
            <p class="metric-value">184</p>
          </div>
          <div>
            <p class="metric-label">Open dissent</p>
            <p class="metric-value">6</p>
          </div>
          <div>
            <p class="metric-label">Revisit due</p>
            <p class="metric-value">4</p>
          </div>
        </div>
      </div>
    </section>

    <section class="problem">
      <div class="section-heading">
        <p class="eyebrow">Why now</p>
        <h2>Chat is reactive. Continuity is proactive.</h2>
        <p class="lede">Teams keep repeating debates because the “why” is lost in threads. ContinuuAI mirrors your patterns and flags drift before it bites.</p>
      </div>
      <div class="grid three">
        <div class="card">
          <h3>Rationale disappears</h3>
          <p>Context lives in meetings and DMs; successions start from zero.</p>
        </div>
        <div class="card">
          <h3>Dissent gets buried</h3>
          <p>Concerns are voiced but not surfaced when decisions matter most.</p>
        </div>
        <div class="card">
          <h3>Patterns stay invisible</h3>
          <p>Conflicts, drift, and forgotten revisits hide until they’re expensive.</p>
        </div>
      </div>
    </section>

    <section class="how">
      <div class="section-heading">
        <p class="eyebrow">How ContinuuAI works</p>
        <h2>Verify, don’t write. Let Julian mirror the patterns.</h2>
      </div>
      <div class="grid four steps">
        <div class="step">
          <span class="step-num">01</span>
          <h3>Capture in 30s</h3>
          <p>Structured form pre-fills context. Dissent and uncertainty are first-class.</p>
        </div>
        <div class="step">
          <span class="step-num">02</span>
          <h3>Organize by stream</h3>
          <p>Decisions live in streams (product, compliance, platform) with ACLs.</p>
        </div>
        <div class="step">
          <span class="step-num">03</span>
          <h3>Surface conflicts</h3>
          <p>Revisit reminders, unresolved dissent, and drift/conflict insights auto-appear.</p>
        </div>
        <div class="step">
          <span class="step-num">04</span>
          <h3>Brief successors</h3>
          <p>Generate evidence-anchored briefings for new teammates instantly.</p>
        </div>
      </div>
    </section>

    <section class="highlights">
      <div class="section-heading">
        <p class="eyebrow">Product highlights</p>
        <h2>Purpose-built for decision continuity</h2>
      </div>
      <div class="grid three">
        <div class="card highlight" id="highlight-dashboard">
          <h3>Needs Attention</h3>
          <p class="muted">Live feed of revisit reminders, unresolved dissent, and insights.</p>
          <div class="mini-list" data-slot="needs-attention"></div>
        </div>
        <div class="card highlight" id="highlight-decision">
          <h3>Decision detail</h3>
          <p class="muted">Reasoning, constraints, dissent, uncertainty, and outcomes—preserved in one place.</p>
          <div class="decision-preview" data-slot="decision-detail">
            <div class="preview-header">
              <span class="dot"></span>
              <div>
                <p class="preview-title">Loading decision…</p>
                <p class="preview-sub muted">Stream • Decided by • Date</p>
              </div>
            </div>
            <div class="preview-body muted">Reasoning will appear here.</div>
            <div class="preview-tags">
              <span class="pill tiny">Dissent</span>
              <span class="pill tiny">Uncertainty</span>
            </div>
          </div>
        </div>
        <div class="card highlight" id="highlight-ask">
          <h3>Ask Julian</h3>
          <p class="muted">Evidence-anchored answers citing the spans that back each response.</p>
          <div class="ask-preview">
            <div class="prompt muted">“What did we decide about API versioning?”</div>
            <div class="answer">
              <p class="muted">Based on your recorded decisions, backwards compatibility was critical in March, but the October decision did not mention it. Revisit assumption?</p>
              <div class="evidence muted">[1] Decision: API versioning (Mar 12) • [2] Decision: Pricing v2 (Oct 4)</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="principles">
      <div class="section-heading">
        <p class="eyebrow">Guardrails</p>
        <h2>Non-directive, evidence-first, exit-safe</h2>
      </div>
      <div class="grid four">
        <div class="card">
          <h3>Evidence anchored</h3>
          <p>Every insight cites source spans—no free-floating opinions.</p>
        </div>
        <div class="card">
          <h3>Non-directive</h3>
          <p>Julian mirrors patterns; it never tells you what to do.</p>
        </div>
        <div class="card">
          <h3>Org-specific</h3>
          <p>Learns your glossary, entities, and patterns without fine-tuning the base model.</p>
        </div>
        <div class="card">
          <h3>Exit-safe</h3>
          <p>Export everything—decisions, dissent, outcomes, insights—any time.</p>
        </div>
      </div>
    </section>

    <section class="cta">
      <div class="cta__copy">
        <h2>Ready to see your decision memory?</h2>
        <p>Jump into the dashboard or record the next decision in under a minute.</p>
      </div>
      <div class="cta__actions">
        <a class="btn primary" href="/dashboard">Open the Dashboard</a>
        <a class="btn ghost" href="/record">Record a decision</a>
      </div>
    </section>

    <section class="faq">
      <div class="section-heading">
        <p class="eyebrow">FAQ</p>
        <h2>What teams ask before they switch</h2>
      </div>
      <div class="faq__list">
        <div class="faq__item">
          <h3>Where does it run?</h3>
          <p>Locally/on your infra. Gemma via llama.cpp, no external LLM calls.</p>
        </div>
        <div class="faq__item">
          <h3>How are conflicts found?</h3>
          <p>Batch pattern analyzer compares assumptions/decisions, then verifies with the LLM.</p>
        </div>
        <div class="faq__item">
          <h3>How is dissent stored?</h3>
          <p>Dissent and uncertainty are structured records, linked to decisions and surfaced on dashboard.</p>
        </div>
        <div class="faq__item">
          <h3>Can we export?</h3>
          <p>Yes—event log, decisions, dissent, outcomes, and insights are all exportable.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer__brand">ContinuuAI</div>
    <div class="footer__links">
      <a href="/dashboard">Dashboard</a>
      <a href="/record">Record</a>
      <a href="/">Ask Julian</a>
    </div>
  </footer>

  <script>
    (async function hydrateHighlights() {
      const fallback = {
        needs_attention: [
          { title: 'Decision due for revisit: API versioning', description: 'Was scheduled for 2025-01-15', severity: 'warning' },
          { title: 'Unresolved dissent: Security concerns on Feature X', description: "Maria Chen: \"We’re deciding for patients, not with them.\"", severity: 'attention' },
          { title: 'Potential conflict: Pricing v2 vs Enterprise discount', description: 'Detected by pattern analyzer', severity: 'info' }
        ],
        recent_decisions: [
          { id: 'd1', title: 'Ship Feature Y behind flag', decided_at: '2024-12-18', stream: { name: 'Product', color: '#5c7cff' }, decided_by: 'A. Patel' }
        ]
      };

      async function fetchJson(url) {
        const res = await fetch(url, { headers: { 'Accept': 'application/json' } });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        return res.json();
      }

      function renderNeedsAttention(items) {
        const slot = document.querySelector('[data-slot="needs-attention"]');
        if (!slot) return;
        slot.innerHTML = '';
        items.slice(0, 4).forEach(item => {
          const row = document.createElement('div');
          row.className = 'mini-row';
          const pill = document.createElement('span');
          pill.className = `pill tiny ${item.severity || 'info'}`;
          pill.textContent = (item.severity || 'info').toUpperCase();
          const text = document.createElement('div');
          text.innerHTML = `<p class="mini-title">${item.title}</p><p class="mini-sub muted">${item.description || ''}</p>`;
          row.appendChild(pill);
          row.appendChild(text);
          slot.appendChild(row);
        });
      }

      function renderDecision(decision) {
        const wrapper = document.querySelector('[data-slot="decision-detail"]');
        if (!wrapper) return;
        wrapper.querySelector('.preview-title').textContent = decision.title || 'Decision';
        wrapper.querySelector('.preview-sub').textContent = `${decision.stream?.name || 'Stream'} • ${decision.decided_by || 'Author'} • ${decision.decided_at || ''}`;
        wrapper.querySelector('.preview-body').textContent = decision.reasoning ? decision.reasoning.slice(0, 180) + (decision.reasoning.length > 180 ? '…' : '') : '';
        const dot = wrapper.querySelector('.dot');
        if (decision.stream?.color) dot.style.background = decision.stream.color;
        const tags = wrapper.querySelector('.preview-tags');
        tags.innerHTML = '';
        if (decision.dissent && decision.dissent.length) {
          const tag = document.createElement('span');
          tag.className = 'pill tiny';
          tag.textContent = `${decision.dissent.length} dissent`;
          tags.appendChild(tag);
        }
        if (decision.uncertainty && decision.uncertainty.length) {
          const tag = document.createElement('span');
          tag.className = 'pill tiny';
          tag.textContent = `${decision.uncertainty.length} uncertainty`;
          tags.appendChild(tag);
        }
      }

      try {
        const data = await fetchJson('/api/dashboard');
        renderNeedsAttention(data.needs_attention || fallback.needs_attention);
        const first = (data.recent_decisions || [])[0];
        if (first?.id) {
          const detail = await fetchJson(`/api/decisions/${first.id}`);
          renderDecision(detail);
        } else {
          renderDecision({
            title: 'Ship Feature Y behind flag',
            reasoning: 'We will release behind a feature flag to validate adoption while containing blast radius.',
            stream: { name: 'Product', color: '#5c7cff' },
            decided_by: 'A. Patel',
            decided_at: '2024-12-18',
            dissent: [],
            uncertainty: []
          });
        }
      } catch (e) {
        renderNeedsAttention(fallback.needs_attention);
        renderDecision({
          title: 'API versioning policy',
          reasoning: 'Backward compatibility is critical; default to additive changes and deprecate after 2 releases.',
          stream: { name: 'Platform', color: '#5c7cff' },
          decided_by: 'E. Singh',
          decided_at: '2024-12-15',
          dissent: [{}, {}],
          uncertainty: [{}]
        });
      }
    })();
  </script>
</body>
</html>
